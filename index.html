<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Jogo da Mem√≥ria ‚Äî Dificuldades</title>
<style>
  :root {
    --bg1:#0f1724; --bg2:#071020; --accent:#6366f1;
    --muted:#9aa4b2;
  }
  *{box-sizing:border-box}
  body {
    margin:0;
    font-family:Inter,Arial,Helvetica,sans-serif;
    background:linear-gradient(180deg,var(--bg1),var(--bg2));
    color:#eef2ff;
    display:flex;
    justify-content:center;
    padding:24px;
  }
  .wrap{width:100%;max-width:900px}
  header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;flex-wrap:wrap;gap:10px}
  h1{margin:0;font-size:20px}
  .controls{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
  button,select{font-family:inherit}
  button{background:var(--accent);border:none;padding:8px 12px;border-radius:8px;color:#fff;cursor:pointer}
  .stats{display:flex;gap:16px;align-items:center;color:var(--muted)}
  .board {
    display:grid;
    gap:12px;
    margin:auto;
    justify-content:center;
  }
  .card {position:relative;aspect-ratio:1/1;perspective:1000px;}
  .inner {
    width:100%;height:100%;
    transform-style:preserve-3d;
    transition:transform .45s cubic-bezier(.2,.9,.3,1);
    border-radius:10px;cursor:pointer;
  }
  .card.flipped .inner{transform:rotateY(180deg);}
  .face {position:absolute;inset:0;border-radius:10px;backface-visibility:hidden;overflow:hidden;display:grid;place-items:center;}
  .front {background:#1e293b;color:var(--muted);font-size:28px;}
  .back {transform:rotateY(180deg);}
  .back img{width:100%;height:100%;object-fit:cover;}
  .ranking{display:flex;gap:16px;margin-top:18px;flex-wrap:wrap}
  .rank-box{background:rgba(255,255,255,0.03);padding:12px;border-radius:10px;min-width:220px;flex:1}
  .rank-box h3{margin:0 0 8px 0;font-size:15px}
  ol{margin:0;padding-left:18px;color:var(--muted)}
  /* modal */
  .modal-back{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.6)}
  .modal-back.show{display:flex}
  .modal{background:linear-gradient(180deg,#081225,#041022);padding:18px;border-radius:12px;min-width:300px}
  .modal h2{margin-top:0}
  .modal-row{display:flex;gap:8px;margin-top:10px}
  input.name{flex:1;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.2);background:rgba(255,255,255,0.05);color:#fff}
  select.diff{padding:8px;border-radius:8px;background:rgba(255,255,255,0.05);color:#fff}
  .modal-buttons{display:flex;gap:8px;justify-content:flex-end;margin-top:12px}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <h1>üß© Jogo da Mem√≥ria</h1>
    <div class="controls">
      <label for="difficulty">Dificuldade:</label>
      <select id="difficulty" class="diff">
        <option value="3x4">3x4 (f√°cil)</option>
        <option value="4x4">4x4 (normal)</option>
      </select>
      <button id="startBtn">Iniciar jogo</button>
      <div class="stats">
        ‚è±Ô∏è <span id="time">00:00</span> |
        üéØ <span id="moves">0</span>
      </div>
      <button id="restartBtn">Reiniciar</button>
    </div>
  </header>

  <div id="board" class="board"></div>

  <section class="ranking">
    <div class="rank-box">
      <h3>üèÜ Ranking ‚Äî Tempo</h3>
      <ol id="rank-time"></ol>
    </div>
    <div class="rank-box">
      <h3>üèÜ Ranking ‚Äî Movimentos</h3>
      <ol id="rank-moves"></ol>
    </div>
  </section>
</div>

<!-- Modal -->
<div id="modalBack" class="modal-back">
  <div class="modal">
    <h2>üéâ Parab√©ns!</h2>
    <div id="modalText"></div>
    <div class="modal-row">
      <input id="playerName" class="name" placeholder="Digite seu nome" maxlength="30" required>
      <select id="whichRank">
        <option value="both">Tempo e Movimentos</option>
        <option value="time">S√≥ Tempo</option>
        <option value="moves">S√≥ Movimentos</option>
      </select>
    </div>
    <div class="modal-buttons">
      <button id="saveBtn">Salvar</button>
    </div>
  </div>
</div>

<script>
const icons = [
  "https://i.imgur.com/xDZQ5dH.jpg",
  "https://i.imgur.com/9Pet8B3.jpg",
  "https://i.imgur.com/PDUWW9q.jpg",
  "https://i.imgur.com/pO3bFOn.jpg",
  "https://i.imgur.com/bwNt2Uv.jpg",
  "https://i.imgur.com/EYe3bmY.jpg",
  "https://i.imgur.com/OdzIlpf.jpg",
  "https://i.imgur.com/Qj50kbC.jpg"
];

const boardEl = document.getElementById('board');
const timeEl = document.getElementById('time');
const movesEl = document.getElementById('moves');
const restartBtn = document.getElementById('restartBtn');
const startBtn = document.getElementById('startBtn');
const rankTimeEl = document.getElementById('rank-time');
const rankMovesEl = document.getElementById('rank-moves');
const difficultySelect = document.getElementById('difficulty');

const modalBack = document.getElementById('modalBack');
const modalText = document.getElementById('modalText');
const playerNameInput = document.getElementById('playerName');
const saveBtn = document.getElementById('saveBtn');
const whichRank = document.getElementById('whichRank');

let first=null,second=null,lock=false;
let moves=0,seconds=0,timer=null,pairsFound=0;
let difficulty='3x4';

function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}return a;}
function formatTime(s){const m=Math.floor(s/60);const sec=s%60;return String(m).padStart(2,'0')+':'+String(sec).padStart(2,'0');}

function buildDeck(){
  if(difficulty==='3x4'){
    const chosen = icons.slice(0,6);
    return shuffle([...chosen,...chosen]); // 6 pares = 12 cartas
  }else{
    const chosen = icons.slice(0,8);
    return shuffle([...chosen,...chosen]); // 8 pares = 16 cartas
  }
}

function renderBoard(){
  boardEl.innerHTML='';
  const deck=buildDeck();
  boardEl.style.gridTemplateColumns = difficulty==='3x4' ? 'repeat(4,1fr)' : 'repeat(4,1fr)';
  deck.forEach((src)=>{
    const card=document.createElement('div');
    card.className='card';
    card.dataset.src=src;
    card.innerHTML=`
      <div class="inner">
        <div class="face front">?</div>
        <div class="face back"><img src="${src}" alt=""></div>
      </div>`;
    card.addEventListener('click',()=>onClick(card));
    boardEl.appendChild(card);
  });
  movesEl.textContent='0';
  timeEl.textContent='00:00';
}

function startTimer(){if(timer)return;timer=setInterval(()=>{seconds++;timeEl.textContent=formatTime(seconds);},1000);}
function stopTimer(){clearInterval(timer);timer=null;}

function onClick(card){
  if(lock || card.classList.contains('flipped'))return;
  if(seconds===0 && moves===0) startTimer();
  card.classList.add('flipped');
  if(!first){first=card;return;}
  second=card;lock=true;moves++;movesEl.textContent=moves;
  if(first.dataset.src===second.dataset.src){
    setTimeout(()=>{
      first.style.visibility='hidden';
      second.style.visibility='hidden';
      pairsFound++;
      reset();
      const totalPairs = difficulty==='3x4'?6:8;
      if(pairsFound===totalPairs) finishGame();
    },400);
  }else{
    setTimeout(()=>{
      first.classList.remove('flipped');
      second.classList.remove('flipped');
      reset();
    },800);
  }
}
function reset(){first=null;second=null;lock=false;}

function finishGame(){
  stopTimer();
  modalText.textContent=`Voc√™ terminou em ${formatTime(seconds)} com ${moves} movimentos (${difficulty}).`;
  modalBack.classList.add('show');
  playerNameInput.focus();
}

function saveRanking(type,name,score){
  const key=(type==='time')?`ranking_time_${difficulty}`:`ranking_moves_${difficulty}`;
  const list=JSON.parse(localStorage.getItem(key))||[];
  list.push({name,score});
  list.sort((a,b)=>a.score-b.score);
  localStorage.setItem(key,JSON.stringify(list.slice(0,3)));
}

function renderRankings(){
  const tKey=`ranking_time_${difficulty}`;
  const mKey=`ranking_moves_${difficulty}`;
  const t=JSON.parse(localStorage.getItem(tKey))||[];
  const m=JSON.parse(localStorage.getItem(mKey))||[];
  rankTimeEl.innerHTML=''; rankMovesEl.innerHTML='';
  t.forEach((x,i)=>{
    const li=document.createElement('li');
    li.textContent=`${i+1}. ${x.name} ‚Äî ${formatTime(x.score)}`;
    rankTimeEl.appendChild(li);
  });
  m.forEach((x,i)=>{
    const li=document.createElement('li');
    li.textContent=`${i+1}. ${x.name} ‚Äî ${x.score} mov.`;
    rankMovesEl.appendChild(li);
  });
}

saveBtn.addEventListener('click',()=>{
  const name=playerNameInput.value.trim();
  if(!name){alert("Digite um nome!");playerNameInput.focus();return;}
  const choice=whichRank.value;
  if(choice==='both'||choice==='time')saveRanking('time',name,seconds);
  if(choice==='both'||choice==='moves')saveRanking('moves',name,moves);
  modalBack.classList.remove('show');
  renderRankings();
});

restartBtn.addEventListener('click',()=>restart());
startBtn.addEventListener('click',()=>{
  difficulty=difficultySelect.value;
  restart();
});

function restart(){
  stopTimer();seconds=0;moves=0;pairsFound=0;reset();renderBoard();renderRankings();
}

renderBoard();
renderRankings();
</script>
<script>
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("./service-worker.js")
      .then(() => console.log("Service Worker registrado com sucesso!"))
      .catch((err) => console.error("Erro ao registrar o Service Worker:", err));
  }
</script>
</body>
</html>


